server:
  port: 8086

spring:
  application:
    name: reports-service
  cloud:
    consul:
      host: consul
      port: 8500
      discovery:
        instance-id: ${spring.application.name}:${random.value}
  
  # Redis Configuration
  redis:
    host: redis
    port: 6379
  cache:
    type: redis
    redis:
      time-to-live: 300000  # 5 minutos

# Datasource Configuration (Multi-datasource simulation pointing to same DB for now)
datasource:
  catalog:
    jdbc-url: jdbc:mysql://${MYSQL_HOST:mysql-forestech}:${MYSQL_PORT:3306}/FORESTECHOIL?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
    username: ${MYSQL_USER:root}
    password: ${MYSQL_PASSWORD:forestech_root_2024}
    driver-class-name: com.mysql.cj.jdbc.Driver
  fleet:
    jdbc-url: jdbc:mysql://${MYSQL_HOST:mysql-forestech}:${MYSQL_PORT:3306}/FORESTECHOIL?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
    username: ${MYSQL_USER:root}
    password: ${MYSQL_PASSWORD:forestech_root_2024}
    driver-class-name: com.mysql.cj.jdbc.Driver
  inventory:
    jdbc-url: jdbc:mysql://${MYSQL_HOST:mysql-forestech}:${MYSQL_PORT:3306}/FORESTECHOIL?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
    username: ${MYSQL_USER:root}
    password: ${MYSQL_PASSWORD:forestech_root_2024}
    driver-class-name: com.mysql.cj.jdbc.Driver

logging:
  level:
    com.forestech.reports: DEBUG
    org.springframework.jdbc.core: DEBUG

# Distributed Tracing Configuration
management:
  tracing:
    sampling:
      probability: 0.1
  zipkin:
    tracing:
      endpoint: ${ZIPKIN_URL:http://zipkin:9411/api/v2/spans}
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
