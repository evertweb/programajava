# HikariCP Optimal Configuration for Swing Application
# Copy these values to your application.properties file

# Database Configuration
db.url=jdbc:mysql://localhost:3306/FORESTECHOIL
db.username=root
db.password=your_password_here

# ============================================================================
# HikariCP Pool Configuration - OPTIMIZED FOR CONCURRENT PANEL LOADING
# ============================================================================

# Minimum idle connections in pool (always ready)
# Recommended: 5 for quick response to user actions
hikari.minimum-idle=5

# Maximum pool size (INCREASED from 10 to 15)
# Rationale: 3 panels loading concurrently × 5 max connections each = 15
# This prevents pool exhaustion during rapid navigation
hikari.maximum-pool-size=15

# Connection timeout (INCREASED from 5000 to 8000ms)
# How long to wait for a connection from pool before throwing exception
# Longer timeout gives queued tasks time to get a connection
hikari.connection-timeout=8000

# Idle timeout - how long a connection can sit unused before being removed
# Default: 10 minutes (600000ms)
hikari.idle-timeout=600000

# Max lifetime - maximum age of a connection before forced replacement
# Default: 30 minutes (1800000ms)
# Prevents stale connections
hikari.max-lifetime=1800000

# Validation timeout - how long to wait when testing connection validity
hikari.validation-timeout=5000

# ============================================================================
# LEAK DETECTION (NEW)
# ============================================================================

# Leak detection threshold (NEW SETTING)
# Logs warning if connections aren't returned to pool within this time
# 10 seconds is reasonable for most queries
# Set to 0 to disable
hikari.leak-detection-threshold=10000

# ============================================================================
# CONNECTION POOL METRICS
# ============================================================================
# Enable JMX monitoring (optional, for production monitoring)
# hikari.register-mbeans=true

# ============================================================================
# EXPLANATION OF CHANGES FROM DEFAULT
# ============================================================================
# 
# BEFORE (causing freezing):
# - maximum-pool-size: 10
# - connection-timeout: 5000ms
# - No leak detection
# 
# PROBLEM:
# - Rapid navigation creates 10+ concurrent SwingWorkers
# - Each worker requests 1+ DB connections
# - Pool exhausts → timeout → freezing
# 
# AFTER (optimized):
# - maximum-pool-size: 15 (enough for 3 panels × 5 connections)
# - connection-timeout: 8000ms (more patient waiting)
# - leak-detection: 10000ms (catches unclosed connections)
# 
# COMBINED WITH:
# - BackgroundTaskExecutor limiting to 5 concurrent tasks
# - Global navigation lock preventing 3+ panels loading simultaneously
# 
# RESULT:
# - Max 5 concurrent background tasks
# - Each task uses ~2-3 connections on average
# - Pool capacity: 15 connections
# - Safety margin: 15 - (5 × 3) = 0 minimum, typically 5-8 idle
# 
# ============================================================================
